<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danaid - Bezpieczny czat E2E</title>
    <link rel="stylesheet" href="login.css">
</head>

<body>
    <div class="butterfly-bg"></div>
    
    <!-- G≈Ç√≥wny nag≈Ç√≥wek -->
    <header class="main-header">
        <h1 class="main-title">Chat Danaid</h1>
    </header>

    <div class="container">
        <!-- Lewa strona - Informacje -->
        <div class="info-section">
            <h3 class="subtitle">Bezpieczny czat z szyfrowaniem end-to-end</h3>
            
            <div class="description">
               <p>
                    Ten projekt to efekt czystej zajawki na programowanie, bezpiecze≈Ñstwo i nowoczesnƒÖ kryptografiƒô. Zbudowany od podstaw przy pomocy modelu jƒôzykowego AI z my≈õlƒÖ o nauce i eksperymentowaniu, stanowi uproszczonƒÖ implementacjƒô technologii u≈ºywanych w topowych aplikacjach jak Signal.<br><br>
                    Je≈õli chcesz zrozumieƒá, jak dzia≈Ça szyfrowanie end-to-end, wymiana kluczy czy podpisy cyfrowe ‚Äì jeste≈õ w dobrym miejscu.
                </p>
                <p>
                    Wszystko, co tu znajdziesz, jest w pe≈Çni open-source. Mo≈ºesz przeglƒÖdaƒá kod, testowaƒá go samodzielnie, uczyƒá siƒô na jego bazie albo nawet rozwijaƒá go dalej. Projekt celowo nie jest przesadnie rozbudowany ‚Äì chodzi≈Ço o przejrzysto≈õƒá i edukacjƒô, a nie du≈ºƒÖ ilo≈õƒá funkcji.<br> Ale je≈õli chcesz, mo≈ºesz go ≈Çatwo rozszerzyƒá.<br><br>
                </p>
                <p>
                    InspiracjƒÖ by≈Ça aplikacja Signal i protoko≈Çy takie jak X3DH oraz Double Ratchet. Choƒá nie jest to ich pe≈Çna implementacja 1:1, wiele mechanizm√≥w zosta≈Ço odwzorowanych na potrzeby nauki i eksperyment√≥w z E2EE.
                </p>
            </div>

            <ul class="features">
                <li>Szyfrowanie end-to-end ka≈ºdej wiadomo≈õci</li>
                <li>Forward secrecy z wymianƒÖ kluczy ECDH</li>
                <li>Autoryzacja z podpisami cyfrowymi</li>
                <li>System znajomych dla wiƒôkszego bezpiecze≈Ñstwa</li>
                <li>Kod ≈∫r√≥d≈Çowy otwarty i edukacyjny</li>
            </ul>
        </div>

        <!-- Prawa strona - Formularz logowania -->
        <div class="login-section">
            <div class="login-container">
                <div class="auth-tabs">
                    <button class="tab active">Logowanie</button>
                    <button class="tab">Rejestracja</button>
                </div>

                <div id="login-form" class="auth-form active">
                    <h2 class="login-title">Zaloguj siƒô</h2>
                    <form id="login-form-element">
                        <div class="form-group">
                            <label for="username">Nazwa u≈ºytkownika</label>
                            <input type="text" 
                                   id="username" 
                                   name="username" 
                                   placeholder="Wprowad≈∫ nazwƒô u≈ºytkownika" 
                                   required
                                   autocomplete="username">
                        </div>

                        <div class="form-group">
                            <label for="password">Has≈Ço</label>
                            <input type="password" 
                                   id="password" 
                                   name="password" 
                                   placeholder="Wprowad≈∫ has≈Ço" 
                                   required
                                   autocomplete="current-password">
                        </div>

                        <div class="form-group">
                            <label for="private-key">Klucz prywatny (.pem)</label>
                            <input type="file" 
                                   id="private-key" 
                                   name="private-key" 
                                   accept=".pem,.txt" 
                                   required>
                            <div class="file-info">
                                <small>Wybierz plik klucza prywatnego pobrany podczas rejestracji</small>
                            </div>
                        </div>

                        <button type="submit" class="login-btn">Zaloguj siƒô</button>
                        
                        <div class="form-footer">
                            <small class="security-info">
                                üîí Twoje has≈Ço i klucz prywatny sƒÖ przetwarzane lokalnie i szyfrowane
                            </small>
                        </div>
                    </form>
                </div>

                <div id="register-form" class="auth-form">
                    <h2 class="login-title">Utw√≥rz konto</h2>
                    <form id="register-form-element">
                        <div class="form-group">
                            <label for="reg-username">Nazwa u≈ºytkownika</label>
                            <input type="text" 
                                   id="reg-username" 
                                   name="username" 
                                   placeholder="Wybierz nazwƒô u≈ºytkownika (min. 3 znaki)" 
                                   required
                                   minlength="3"
                                   maxlength="50"
                                   pattern="[a-zA-Z0-9_\-]+"
                                   autocomplete="username">
                            <div class="input-help">
                                <small>Tylko litery, cyfry, podkre≈õlenia i my≈õlniki</small>
                            </div>
                        </div>
            
                        <div class="form-group">
                            <label for="reg-password">Has≈Ço</label>
                            <input type="password" 
                                   id="reg-password" 
                                   name="password" 
                                   placeholder="Min. 8 znak√≥w, du≈ºa litera, cyfra, znak specjalny" 
                                   required
                                   minlength="8"
                                   autocomplete="new-password">
                            <div class="input-help">
                                <small>Has≈Ço musi zawieraƒá: min. 8 znak√≥w, du≈ºƒÖ literƒô, cyfrƒô i znak specjalny</small>
                            </div>
                        </div>
            
                        <button type="submit" class="login-btn">Utw√≥rz konto</button>
                        
                        <div class="form-footer">
                            <small class="security-info">
                                üîê Po rejestracji pobierzesz klucz prywatny - zachowaj go bezpiecznie!
                            </small>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Kontener z przyciskami na dole -->
    <div class="bottom-section">
        <div class="action-buttons-container">
            <div class="action-buttons">
                <a href="#" class="action-btn">üìÇ Zobacz kod na GitHub</a>
                <a href="#" class="action-btn">üìã Dokumentacja</a>
                <a href="#" class="action-btn">üîÑ Schemat Data Flow</a>
            </div>
        </div>
    </div>

    <!-- Modal dla instrukcji pobrania klucza -->
    <div class="modal" id="key-download-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üéâ Rejestracja zako≈Ñczona!</h3>
                <button class="modal-close" onclick="closeKeyDownloadModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-message">
                    <div class="success-icon">‚úÖ</div>
                    <p><strong>Twoje konto zosta≈Ço utworzone pomy≈õlnie!</strong></p>
                    <p>Teraz musisz pobraƒá sw√≥j klucz prywatny:</p>
                    
                    <div class="key-instructions">
                        <div class="instruction-item">
                            <span class="step-number">1</span>
                            <span>Kliknij przycisk "Pobierz klucz prywatny"</span>
                        </div>
                        <div class="instruction-item">
                            <span class="step-number">2</span>
                            <span>Zapisz plik w bezpiecznym miejscu</span>
                        </div>
                        <div class="instruction-item">
                            <span class="step-number">3</span>
                            <span>U≈ºyj tego pliku do logowania</span>
                        </div>
                    </div>
                    
                    <div class="warning-box">
                        <strong>‚ö†Ô∏è WA≈ªNE:</strong> Je≈õli utracisz ten plik, nie bƒôdziesz m√≥g≈Ç siƒô zalogowaƒá!
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="download-key-btn">üì• Pobierz klucz prywatny</button>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Przetwarzanie...</div>
        </div>
    </div>

    <!-- Toast notification container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Skrypty -->
    <script src="form-tabs.js"></script>

    <script>
      fetch("https://chat-danaid.vercel.app/api/register")
        .then(response => response.json())
        .then(data => console.log("Odpowied≈∫ backendu:", data))
        .catch(error => console.error("B≈ÇƒÖd po≈ÇƒÖczenia z backendem:", error));
    </script>
    
</body>
</html>
