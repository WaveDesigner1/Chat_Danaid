<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danaid - Bezpieczny czat E2E</title>
    <link rel="stylesheet" href="login.css">
</head>

<body>
    <div class="butterfly-bg"></div>
    
    <!-- GÅ‚Ã³wny nagÅ‚Ã³wek -->
    <header class="main-header">
        <h1 class="main-title">Chat Danaid</h1>
    </header>

    <div class="container">
        <!-- Lewa strona - Informacje -->
        <div class="info-section">
            <h3 class="subtitle">Bezpieczny czat z szyfrowaniem end-to-end</h3>
            
            <div class="description">
               <p>
                    Ten projekt to efekt czystej zajawki na programowanie, bezpieczeÅ„stwo i nowoczesnÄ… kryptografiÄ™. Zbudowany od podstaw przy pomocy modelu jÄ™zykowego AI z myÅ›lÄ… o nauce i eksperymentowaniu, stanowi uproszczonÄ… implementacjÄ™ technologii uÅ¼ywanych w topowych aplikacjach jak Signal.<br><br>
                    JeÅ›li chcesz zrozumieÄ‡, jak dziaÅ‚a szyfrowanie end-to-end, wymiana kluczy czy podpisy cyfrowe â€“ jesteÅ› w dobrym miejscu.
                </p>
                <p>
                    Wszystko, co tu znajdziesz, jest w peÅ‚ni open-source. MoÅ¼esz przeglÄ…daÄ‡ kod, testowaÄ‡ go samodzielnie, uczyÄ‡ siÄ™ na jego bazie albo nawet rozwijaÄ‡ go dalej. Projekt celowo nie jest przesadnie rozbudowany â€“ chodziÅ‚o o przejrzystoÅ›Ä‡ i edukacjÄ™, a nie duÅ¼Ä… iloÅ›Ä‡ funkcji.<br> Ale jeÅ›li chcesz, moÅ¼esz go Å‚atwo rozszerzyÄ‡.<br><br>
                </p>
                <p>
                    InspiracjÄ… byÅ‚a aplikacja Signal i protokoÅ‚y takie jak X3DH oraz Double Ratchet. ChoÄ‡ nie jest to ich peÅ‚na implementacja 1:1, wiele mechanizmÃ³w zostaÅ‚o odwzorowanych na potrzeby nauki i eksperymentÃ³w z E2EE.
                </p>
            </div>

            <ul class="features">
                <li>Szyfrowanie end-to-end kaÅ¼dej wiadomoÅ›ci</li>
                <li>Forward secrecy z wymianÄ… kluczy ECDH</li>
                <li>Autoryzacja z podpisami cyfrowymi</li>
                <li>System znajomych dla wiÄ™kszego bezpieczeÅ„stwa</li>
                <li>Kod ÅºrÃ³dÅ‚owy otwarty i edukacyjny</li>
            </ul>
        </div>

        <!-- Prawa strona - Formularz logowania -->
        <div class="login-section">
            <div class="login-container">
                <div class="auth-tabs">
                    <button class="tab active">Logowanie</button>
                    <button class="tab">Rejestracja</button>
                </div>

                <div id="login-form" class="auth-form active">
                    <h2 class="login-title">Zaloguj siÄ™</h2>
                    <form id="login-form-element">
                        <div class="form-group">
                            <label for="username">Nazwa uÅ¼ytkownika</label>
                            <input type="text" 
                                   id="username" 
                                   name="username" 
                                   placeholder="WprowadÅº nazwÄ™ uÅ¼ytkownika" 
                                   required
                                   autocomplete="username">
                        </div>

                        <div class="form-group">
                            <label for="password">HasÅ‚o</label>
                            <input type="password" 
                                   id="password" 
                                   name="password" 
                                   placeholder="WprowadÅº hasÅ‚o" 
                                   required
                                   autocomplete="current-password">
                        </div>

                        <div class="form-group">
                            <label for="private-key">Klucz prywatny (.pem)</label>
                            <input type="file" 
                                   id="private-key" 
                                   name="private-key" 
                                   accept=".pem,.txt" 
                                   required>
                            <div class="file-info">
                                <small>Wybierz plik klucza prywatnego pobrany podczas rejestracji</small>
                            </div>
                        </div>

                        <button type="submit" class="login-btn">Zaloguj siÄ™</button>
                        
                        <div class="form-footer">
                            <small class="security-info">
                                ğŸ”’ Twoje hasÅ‚o i klucz prywatny sÄ… przetwarzane lokalnie i szyfrowane
                            </small>
                        </div>
                    </form>
                </div>

                <div id="register-form" class="auth-form">
                    <h2 class="login-title">UtwÃ³rz konto</h2>
                    <form id="register-form-element">
                        <div class="form-group">
                            <label for="reg-username">Nazwa uÅ¼ytkownika</label>
                            <input type="text" 
                                   id="reg-username" 
                                   name="username" 
                                   placeholder="Wybierz nazwÄ™ uÅ¼ytkownika (min. 3 znaki)" 
                                   required
                                   minlength="3"
                                   maxlength="50"
                                   pattern="[a-zA-Z0-9_\-]+"
                                   autocomplete="username">
                            <div class="input-help">
                                <small>Tylko litery, cyfry, podkreÅ›lenia i myÅ›lniki</small>
                            </div>
                        </div>
            
                        <div class="form-group">
                            <label for="reg-password">HasÅ‚o</label>
                            <input type="password" 
                                   id="reg-password" 
                                   name="password" 
                                   placeholder="Min. 8 znakÃ³w, duÅ¼a litera, cyfra, znak specjalny" 
                                   required
                                   minlength="8"
                                   autocomplete="new-password">
                            <div class="input-help">
                                <small>HasÅ‚o musi zawieraÄ‡: min. 8 znakÃ³w, duÅ¼Ä… literÄ™, cyfrÄ™ i znak specjalny</small>
                            </div>
                        </div>
            
                        <button type="submit" class="login-btn">UtwÃ³rz konto</button>
                        
                        <div class="form-footer">
                            <small class="security-info">
                                ğŸ” Po rejestracji pobierzesz klucz prywatny - zachowaj go bezpiecznie!
                            </small>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Kontener z przyciskami na dole -->
    <div class="bottom-section">
        <div class="action-buttons-container">
            <div class="action-buttons">
                <a href="#" class="action-btn">ğŸ“‚ Zobacz kod na GitHub</a>
                <a href="#" class="action-btn">ğŸ“‹ Dokumentacja</a>
                <a href="#" class="action-btn">ğŸ”„ Schemat Data Flow</a>
            </div>
        </div>
    </div>

    <!-- Modal dla instrukcji pobrania klucza -->
    <div class="modal" id="key-download-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ‰ Rejestracja zakoÅ„czona!</h3>
                <button class="modal-close" onclick="closeKeyDownloadModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-message">
                    <div class="success-icon">âœ…</div>
                    <p><strong>Twoje konto zostaÅ‚o utworzone pomyÅ›lnie!</strong></p>
                    <p>Teraz musisz pobraÄ‡ swÃ³j klucz prywatny:</p>
                    
                    <div class="key-instructions">
                        <div class="instruction-item">
                            <span class="step-number">1</span>
                            <span>Kliknij przycisk "Pobierz klucz prywatny"</span>
                        </div>
                        <div class="instruction-item">
                            <span class="step-number">2</span>
                            <span>Zapisz plik w bezpiecznym miejscu</span>
                        </div>
                        <div class="instruction-item">
                            <span class="step-number">3</span>
                            <span>UÅ¼yj tego pliku do logowania</span>
                        </div>
                    </div>
                    
                    <div class="warning-box">
                        <strong>âš ï¸ WAÅ»NE:</strong> JeÅ›li utracisz ten plik, nie bÄ™dziesz mÃ³gÅ‚ siÄ™ zalogowaÄ‡!
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="download-key-btn">ğŸ“¥ Pobierz klucz prywatny</button>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Przetwarzanie...</div>
        </div>
    </div>

    <!-- Toast notification container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Skrypty -->
    <script src="form-tabs.js"></script>

    <script>
      fetch("https://chat-danaid.vercel.app/api/register")
        .then(response => response.json())
        .then(data => console.log("OdpowiedÅº backendu:", data))
        .catch(error => console.error("BÅ‚Ä…d poÅ‚Ä…czenia z backendem:", error));
    </script>
    
</body>
</html>
